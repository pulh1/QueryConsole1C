Функция ПолучитьДанные(ДатаОкончания, ДатаНачала, Организация)
	Запрос = Новый Запрос;
	Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц();
	Запрос.УстановитьПараметр("ДатаОкончания", ДатаОкончания);
	Запрос.УстановитьПараметр("ДатаНачала", ДатаНачала);
	Запрос.УстановитьПараметр("Организация", Организация);
	ПараметрыПолученияДанных = КадровыйУчет.ПараметрыПолученияСотрудниковОрганизацийПоВременнойТаблице();
	ПараметрыПолученияДанных.ИмяВТФизическиеЛица = Неопределено;
	ПараметрыПолученияДанных.Организация = Организация;
	ПараметрыПолученияДанных.НачалоПериода = ДатаНачала;



	ПараметрыПолученияДанных.РаботникиПоТрудовымДоговорам = Истина;
	ПараметрыПолученияДанных.ПодработкиРаботниковПоТрудовымДоговорам = Ложь;
	ПараметрыПолученияДанных.РаботникиПоДоговорамГПХ = Ложь;

	ПараметрыПолученияДанных.КадровыеДанные = Новый Массив();
	ПараметрыПолученияДанных.КадровыеДанные.Добавить("СОТРУДНИК");

	КадровыйУчет.СоздатьВТСотрудникиОрганизации(
		Запрос.МенеджерВременныхТаблиц,
		Ложь,
		ПараметрыПолученияДанных,
		"ВТСотрудники");

	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ВТСотрудники.Сотрудник КАК Сотрудник,
	|	&ДатаНачала КАК ДатаНачала,
	|	&ДатаОкончания КАК ДатаОкончания
	|ПОМЕСТИТЬ ВТФильтрДанныеУчетаВремениСотрудников
	|ИЗ
	|	ВТСотрудники КАК ВТСотрудники";
	Запрос.Выполнить();
	ПараметрыПолученияДанных = УчетРабочегоВремениРасширенный.ПараметрыДляЗапросВТДанныеУчетаВремениИСостоянийСотрудников();
	ПараметрыПолученияДанных.ИмяВТСотрудники = "ВТФильтрДанныеУчетаВремениСотрудников";
	ПараметрыПолученияДанных.ИмяВТРезультат = "ВТДанныеУчетаВремениСотрудников";
	ПараметрыПолученияДанных.РассчитыватьПлановоеВремя = Ложь;


	ПараметрыПолученияДанных.ДатаНачала = ДатаНачала;
	ПараметрыПолученияДанных.МесяцДатаНачала = НачалоМесяца(ПараметрыПолученияДанных.ДатаНачала);
	ПараметрыПолученияДанных.ДатаОкончания = ДатаОкончания;
	ПараметрыПолученияДанных.МесяцДатаОкончания = КонецМесяца(ПараметрыПолученияДанных.ДатаОкончания);
	ПараметрыПолученияДанных.ДатаАктуальности = ДатаНачала;
	ПараметрыПолученияДанных.ПолучатьУсловияТрудаИТерритории = Ложь;



	УчетРабочегоВремениРасширенный.СоздатьВТДанныеУчетаВремениИСостоянийСотрудников(
		Запрос.МенеджерВременныхТаблиц,
		Ложь,
		ПараметрыПолученияДанных);

	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ВТСотрудники.Сотрудник КАК Сотрудник,
	|	&ДатаНачала КАК ДатаНачала,
	|	&ДатаОкончания КАК ДатаОкончания
	|ПОМЕСТИТЬ ВТФильтрКадроваяИсторияСотрудниковПериоды
	|ИЗ
	|	ВТСотрудники КАК ВТСотрудники";
	Запрос.Выполнить();
	Измерения = Новый Массив();
	СоответствиеИзмерений = Новый Соответствие();
	Измерения.Добавить("ДатаОкончания");
	СоответствиеИзмерений.Вставить("ДатаОкончания", "ДатаОкончания");
	Измерения.Добавить("ДатаНачала");
	СоответствиеИзмерений.Вставить("ДатаНачала", "ДатаНачала");
	Измерения.Добавить("Сотрудник");
	СоответствиеИзмерений.Вставить("Сотрудник", "Сотрудник");
	ОписаниеВТФильтр = ЗарплатаКадрыПериодическиеРегистры.ОписаниеФильтраДляСоздатьВТИмяРегистраПоВременнойТаблице(
		"ВТФильтрКадроваяИсторияСотрудниковПериоды",
		Измерения);
	ОписаниеВТФильтр.СоответствиеИзмеренийРегистраИзмерениямФильтра = СоответствиеИзмерений;
	ПараметрыПостроения = ЗарплатаКадрыПериодическиеРегистры.ПараметрыПостроенияДляСоздатьВТИмяРегистра();

	ПараметрыПостроения.ИндексироватьПо = Новый Массив;


	ПараметрыПостроения.ФормироватьСПериодичностьДень = Истина;
	ПараметрыПостроения.ВключатьЗаписиНаНачалоПериода = Истина;
	ПараметрыПостроения.ОтборыЗаписейНаНачалоПериода = Новый Массив();
	ЗарплатаКадрыПериодическиеРегистры.СоздатьВТИмяРегистраПериоды(
		"КадроваяИсторияСотрудников",
		Запрос.МенеджерВременныхТаблиц,
		Ложь,
		ОписаниеВТФильтр,
		ПараметрыПостроения,
		"ВТКадроваяИсторияСотрудниковПериоды");

	Запрос.Текст = 
	"ВЫБРАТЬ
	|	КадроваяИсторияСотрудниковПериоды.ДолжностьПоШтатномуРасписанию КАК ДолжностьПоШтатномуРасписанию,
	|	ДанныеУчетаВремениСотрудников.ВидУчетаВремени КАК ВидУчетаВремени,
	|	СУММА(ДанныеУчетаВремениСотрудников.Дни) КАК Дни,
	|	СУММА(ДанныеУчетаВремениСотрудников.Часы) КАК Часы
	|ИЗ
	|	ВТДанныеУчетаВремениСотрудников КАК ДанныеУчетаВремениСотрудников
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТКадроваяИсторияСотрудниковПериоды КАК КадроваяИсторияСотрудниковПериоды
	|		ПО ДанныеУчетаВремениСотрудников.Сотрудник = КадроваяИсторияСотрудниковПериоды.Сотрудник
	|			И (ДанныеУчетаВремениСотрудников.Дата МЕЖДУ КадроваяИсторияСотрудниковПериоды.НачалоПериода И КадроваяИсторияСотрудниковПериоды.КонецПериода)
	|
	|СГРУППИРОВАТЬ ПО
	|	КадроваяИсторияСотрудниковПериоды.ДолжностьПоШтатномуРасписанию,
	|	ДанныеУчетаВремениСотрудников.ВидУчетаВремени
	|
	|УПОРЯДОЧИТЬ ПО
	|	ДолжностьПоШтатномуРасписанию,
	|	ВидУчетаВремени";
	Возврат Запрос.Выполнить();
КонецФункции
